@page "/"
@using Microsoft.AspNetCore.SignalR.Client
@inject NavigationManager Navigation

@inject ISensorSignalRClient SensorSignalRClient
<PageTitle>Board</PageTitle>

<h1>Board</h1>
<ul id="messagesList">
    @foreach (var message in _messages)
    {
        <li>@message</li>
    }
</ul>



@code {
  
   
    private readonly List<string> _messages = new List<string>();
    protected override async Task OnInitializedAsync()
    {
        SensorSignalRClient.Message((string user, string msg) =>
        {
            _messages.Add(msg);
            InvokeAsync(this.StateHasChanged);
        });            
        
        await SensorSignalRClient.Start();
    }

    private async Task StartHubConnection()
    {   
        SensorSignalRClient.Message((string user,string msg)=>
        {
          _messages.Add(msg);
            StateHasChanged();
        });
        await SensorSignalRClient.Start();

    }
   

}
